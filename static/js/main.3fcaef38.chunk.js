(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{26:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(6),o=n.n(r),i=(n(26),n(8)),s=n(4),u=n(10),l=n.n(u),j=n(20),b=n(11),h=n.n(b);h.a.defaults.baseURL="https://pixabay.com/api/";var f={findFetchHits:function(){var e=Object(j.a)(l.a.mark((function e(t){var n,c,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.search,c=void 0===n?"":n,a=t.currentPage,r=void 0===a?1:a,e.abrupt("return",h.a.get("?q=".concat(c,"&page=").concat(r,"&key=").concat("21917669-1fedcfe337ac78c8906ac8c38","&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.data.hits})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=n(1);function d(e){var t=e.onSubmit,n=Object(c.useState)(""),a=Object(s.a)(n,2),r=a[0],o=a[1],i=function(){o("")};return Object(m.jsx)("header",{className:"Searchbar",children:Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==r.trim&&(t(r),i())},className:"SearchForm",children:[Object(m.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(m.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(m.jsx)("input",{value:r,className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){o(e.currentTarget.value.toLowerCase())}})]})})}var O=function(e){var t=e.webformatURL,n=e.tags,c=e.largeImageURL;return Object(m.jsx)("li",{className:"ImageGalleryItem",children:Object(m.jsx)("img",{className:"ImageGalleryItem-image",src:t,"data-url":c,alt:n})})},g=function(e){var t=e.hits,n=e.onClick;return Object(m.jsx)("ul",{className:"ImageGallery",onClick:n,children:t.map((function(e){var t=e.webformatURL,n=e.id,c=e.tags,a=e.largeImageURL;return Object(m.jsx)(O,{webformatURL:t,tags:c,largeImageURL:a},n)}))})},p=n(21),v=n.n(p),x=function(){return Object(m.jsx)(v.a,{type:"TailSpin",color:"#00BFFF",height:80,width:80})};function S(e){var t=e.onFetchHits;return Object(c.useEffect)((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),[]),Object(m.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})}var w=document.querySelector("#modal-root");function y(e){var t=e.onClose,n=e.children;Object(c.useEffect)((function(){return window.addEventListener("keydown",a),function(){return window.removeEventListener("keydown",a)}}));var a=function(e){"Escape"===e.code&&t()};return Object(r.createPortal)(Object(m.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&t()},children:Object(m.jsx)("div",{className:"Modal",children:n})}),w)}function F(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),o=Object(s.a)(r,2),u=o[0],l=o[1],j=Object(c.useState)(!1),b=Object(s.a)(j,2),h=b[0],O=b[1],p=Object(c.useState)(null),v=Object(s.a)(p,2),w=v[0],F=v[1],k=Object(c.useState)(1),C=Object(s.a)(k,2),L=C[0],N=C[1],I=Object(c.useState)([]),E=Object(s.a)(I,2),R=E[0],U=E[1],T=Object(c.useState)(!1),H=Object(s.a)(T,2),P=H[0],B=H[1],G=Object(c.useState)(""),q=Object(s.a)(G,2),M=q[0],D=q[1],J=Object(c.useState)(""),_=Object(s.a)(J,2),z=_[0],A=_[1],K=!(R.length<12)&&!h;Object(c.useEffect)((function(){""!==u&&Q()}),[u]);var Q=function(){O(!0);var e={search:u,currentPage:L};f.findFetchHits(e).then((function(e){a((function(t){return[].concat(Object(i.a)(t),Object(i.a)(e))})),N((function(e){return e+1})),U(Object(i.a)(e)),0===e.length&&F('No data on your request "'.concat(u,'"'))})).catch((function(e){return F(e.message)})).finally((function(){return O(!1)}))},V=function(){B(!P)},W=function(e){var t=e.target;if("IMG"===t.nodeName){var n=t.dataset.url,c=t.alt;D(n),A(c),O(!1),V()}};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d,{onSubmit:function(e){l(e),N(1),a([]),F(null),D(""),A("")}}),w&&Object(m.jsx)("p",{style:{textAlign:"center",color:"red"},children:w}),Object(m.jsx)(g,{hits:n,onClick:W}),h&&Object(m.jsx)(x,{}),K&&Object(m.jsx)(S,{onFetchHits:Q}),P&&Object(m.jsx)(y,{onClose:V,onClick:W,children:Object(m.jsx)("img",{src:M,alt:z})})]})}var k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};n(67);o.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(F,{})}),document.getElementById("root")),k()}},[[68,1,2]]]);
//# sourceMappingURL=main.3fcaef38.chunk.js.map